library(data.table)
setwd("C:\\Users\\Caio Laptop\\OneDrive - The University of Kansas\\Documents\\PhD\\13. WPs\\08. Ambiguity, Big Data & Now-Casting\\02.Codes\\")
getwd()
library(data.table)
CRSP_codes10_11 <- fread('../01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, sep = ',')
CRSP_codes10_11 <- fread('~/01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, sep = ',')
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, sep = ',')
1
1+1
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, , nrows=10000, sep = ',')
View(CRSP_codes10_11)
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, , nrows=10000, sep = ',')
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, , nrows=100000, sep = ',')
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, , nrows=1000000, sep = ',')
library(dplyr)
library(tidyr)
tbl_df(CRSP_codes10_11)
install.packages("nycflights13")
?airlines
airlines
data(airlines)
library(nycflights13)
data(airlines)
?airlines
tbl_df(airlines)
tbl_df(weather)
tbl_df(planes)
tbl_df(flights)
devtools::install_github("rstudio/EDAWR")
library(EDAWR)
devtools::install_github("rstudio/EDAWR")
?storms
tbl_df(storms)
tbl_df(pollution)
storms
matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56) ))
matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56) ), 6, 3, dimnames=c("city", "particle sixe", "amount"))
matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56) ), 6, 3)
matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56) ), 6, 3), dimnames=list(c("city", "particle sixe", "amount")))
matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56)
),
6, 3, dimnames=list(c("city", "particle sixe", "amount"))
)
matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56)
),
6, 3, dimnames=list(1:6, c("city", "particle sixe", "amount"))
)
my_pollution<- matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56)
),
6, 3, dimnames=list(1:6, c("city", "particle size", "amount"))
)
my_pollution
my_pollution<- matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.vector(c(23,14,22,16,121,56))
),
6, 3, dimnames=list(1:6, c("city", "particle size", "amount"))
)
my_pollution
my_pollution<- matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.numeric(c(23,14,22,16,121,56))
),
6, 3, dimnames=list(1:6, c("city", "particle size", "amount"))
)
my_pollution
tbl_df(my_pollution)
as.integer(c(23,14,22,16,121,56))
my_pollution<- matrix(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(c(23,14,22,16,121,56))
),
6, 3, dimnames=list(1:6, c("city", "particle size", "amount"))
)
my_pollution
my_pollution <- as.numeric(my_pollution$amount)
tbl_df(my_pollution)
as.numeric(my_pollution$amount)
my_pollution$amount
data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(c(23,14,22,16,121,56))
),
6, 3, dimnames=list(1:6, c("city", "particle size", "amount"))
)
data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(c(23,14,22,16,121,56))
),
6, 3
)
data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(c(23,14,22,16,121,56))
)
)
data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(c(23,14,22,16,121,56))
),dimnames=list(1:6, c("city", "particle size", "amount"))
)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(c(23,14,22,16,121,56)))
colnames(my_pollution) <- c("city", "particle size", "amount")
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56))
)
colnames(my_pollution) <- c("city", "particle size", "amount")
View(my_pollution)
tbl_df(my_pollution)
filter(my_pollution, amount>50)
filter(my_pollution, "amount">50)
filter(my_pollution, "amount" > 50)
filter(my_pollution, amount > 50)
select(my_pollution, amount > 50)
library(dplyr)
select(my_pollution, amount > 50)
str(my_pollution)
as.numeric(my_pollution$amount)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
c(23,14,22,16,121,56)), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
tbl_df(my_pollution)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.numeric(c(23,14,22,16,121,56))), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
tbl_df(my_pollution)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(c(23,14,22,16,121,56))), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
tbl_df(my_pollution)
str(my_pollution)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.integer(as.character(c(23,14,22,16,121,56)))), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
tbl_df(my_pollution)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.numeric(as.character(c(23,14,22,16,121,56)))), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
tbl_df(my_pollution)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.numeric(as.character(c(23,14,22,16,121,56)))), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
my_pollution <- s.numeric(as.character(my_pollution$amount)
tbl_df(my_pollution)
my_pollution <- as.numeric(as.character(my_pollution$amount)
tbl_df(my_pollution)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small"),
as.numeric(as.character(c(23,14,22,16,121,56)))), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
my_pollution <- as.numeric(as.character(my_pollution$amount))
tbl_df(my_pollution)
my_pollution<- data.frame(
cbind(
c("New York", "New York", "London", "London", "Beijing", "Beijing"),
c("large", "small", "large", "small", "large", "small")
),
c(23,14,22,16,121,56), stringsAsFactors =FALSE
)
colnames(my_pollution) <- c("city", "particle size", "amount")
tbl_df(my_pollution)
select(my_pollution, amount > 50)
View(my_pollution)
filter(my_pollution, amount > 50)
select(my_pollution, city, amount)
select(my_pollution, -city, -amount)
select(my_pollution, contains(large))
select(my_pollution, contains(size))
select(my_pollution, contains("size"))
mutate(my_pollution, my_sum=cumsum("amount"))
mutate(my_pollution, my_sum=cumsum(amount))
mutate(my_pollution, my_sum=percent_rank(amount))
summarize(my_pollution)
my_pollution %>% summarize(med=median(amount))
my_pollution %>% summarize(med=first(amount))
summarize(my_pollution, med=first(amount))
my_pollution %>%
group_by(city)
my_pollution %>%
group_by(city) %>%
summarize(med=first(amount))
my_pollution %>%
group_by(city) %>%
summarize(first=first(amount))
my_pollution
my_pollution %>%
group_by(city) %>%
summarizelast=last(amount))
my_pollution %>%
group_by(city) %>%
summarize(last=last(amount))
my_pollution %>%
group_by(city) %>%
summarize(last=mean(amount))
my_pollution
View(my_pollution)
my_pollution %>%
group_by(city)
test<-
my_pollution %>%
group_by(city)
test
test[1]
test[1,1]
str(test)
test[[1]]
test[[2]]
test[[3]]
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, , nrows=10000, sep = ',')
tbl_df(CRSP_codes10_11)
tail(CRSP_codes10_11)
CRSP_codes10_11 %>%
group_by(date)
groups(CRSP_codes10_11)
groups(CRSP_codes10_11)[1]
test<-
CRSP_codes10_11 %>%
group_by(date)
groups(CRSP_codes10_11)
groups(test)
groups(test)[1]
View(test)
str(test)
groups(test)
groups(test)[[2]]
groups(test)[[1]]
tbl_df(CRSP_codes10_11)
test<-
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, PRC) %>%
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, PRC)
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, PRC) %>%
summarise(first(TICKER))
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, PRC) %>%
summarise(first(date))
CRSP_codes10_11 %>%
group_by(date) %>%
select(TICKER, date, PRC) %>%
summarise(first(TICKER))
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, PRC) %>%
summarise(first(date), first(TICKER))
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, PRC) %>%
summarise(max(date), first(TICKER))
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, PRC) %>%
summarise(first(TICKER))
CRSP_codes10_11 %>%
group_by(date) %>%
select(TICKER, PRC) %>%
summarise(first(TICKER))
CRSP_codes10_11 %>%
group_by(date) %>%
select(TICKER) %>%
summarise(first(TICKER))
CRSP_codes10_11 %>%
group_by(TICKER) %>%
select(TICKER) %>%
summarise(first(TICKER))
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, , nrows=100000, sep = ',')
tbl_df(CRSP_codes10_11)
CRSP_codes10_11 %>%
group_by(TICKER) %>%
summarise(first(TICKER))
tickers<-CRSP_codes10_11 %>%
group_by(TICKER) %>%
summarise(first(TICKER))
tickers
tickers[1]
tickers[[1]]
tickers[[1]][2]
ungroup(CRSP_codes10_11)
tickers %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][2])
tickers[[1]][2]
CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][2])
tickers_day<-CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][2])
plot(tickers_day$PRC)
tickers_day<-CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][3])
plot(tickers_day$PRC, type='l')
tickers_day<-CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][4])
plot(tickers_day$PRC, type='l')
tickers_day<-CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][5])
plot(tickers_day$PRC, type='l')
tickers_day<-CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][5])
plot(tickers_day$RET, type='l')
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, nrows=1000000, sep = ',')
tbl_df(CRSP_codes10_11)
tickers<-CRSP_codes10_11 %>%
group_by(TICKER) %>%
summarise(first(TICKER))
tickers
tickers[[1]]
ungroup(CRSP_codes10_11)
tickers_day<-CRSP_codes10_11 %>%
group_by(date) %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
filter(TICKER == tickers[[1]][15])
plot(tickers_day$RET, type='l')
tickers[[1]][15]
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, sep = ',')
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, nrows=1000000, sep = ',')
tbl_df(CRSP_codes10_11)
tickers<-CRSP_codes10_11 %>%
group_by(TICKER) %>%
summarise(first(TICKER))
ungroup(CRSP_codes10_11)
tickers_day<-CRSP_codes10_11 %>%
group_by(date)
CRSP_codes10_11 %>%
filter(date == "06/01/1993") %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX) %>%
CRSP_codes10_11 %>%
filter(date == "06/01/1993") %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX)
tickers_day2<-CRSP_codes10_11 %>%
filter(date == "06/01/1993") %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX)
hist(na.omit(tickers_day2))
hist(na.omit(tickers_day2$RET))
na.omit(tickers_day2$RET)
as.numeric(na.omit(tickers_day2$RET))
na.omit(as.numeric(tickers_day2$RET))
hist(na.omit(as.numeric(tickers_day2$RET)))
hist(na.omit(as.numeric(tickers_day2$RET)), nbins=20)
hist(na.omit(as.numeric(tickers_day2$RET)), breaks=seq(-30,30,l=30))
seq(-30,30,l=30)
hist(na.omit(as.numeric(tickers_day2$RET)), breaks=seq(-0.30,0.30,l=30))
seq(-0.30,0.30,l=30)
test_day<-na.omit(as.numeric(tickers_day2$RET)
)
test_day
test_day[1]
test_day[[1]]
str(test_day)
mean)test_day)
mean(test_day)
colnames(test_day)
filter(tickers_day2, RET<-0.02)
filter(tickers_day2, RET> -0.02)
filter(tickers_day2, RET<(-0.02))
tickers_day2
tbl_df(tickers_day2)
tickers_day2<-na.exclude(tickers_day2)
tbl_df(tickers_day2)
test_day<-na.omit(as.numeric(tickers_day2$RET))
as.numeric(tickers_day2$RET)
test_day<-na.omit(as.numeric(tickers_day2$RET))
test_day<(-0.02)
colnames(test_day)
colnames(test_day)<-c("ret")
na.exclude(tickers_day2$RET)
tickers_day2<-CRSP_codes10_11 %>%
filter(date == "06/01/1993" & RET <>"B") %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX)
tickers_day2<-CRSP_codes10_11 %>%
filter(date == "06/01/1993" & RET!="B") %>%
select(date, TICKER, BIDLO, ASKHI, PRC, VOL, RET, BID, ASK, OPENPRC, NUMTRD, RETX)
tbl_df(tickers_day2)
tickers_day2
filter(tickers_day2, RET<(-0.02))
filter(tickers_day2, RET>(0.05))
filter(tickers_day2, RET<(-0.05))
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET<(-0.05))
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET>(0.02))
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET<(0.02))
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET<(-0.02))
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET<(-0.03))
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET<=(-0.03))
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET>=(0.03))
test<-
tickers_day2 %>%
select(TICKER, RET) %>%
filter(RET>=(0.03))
hist(test)
hist(as.numeric(test))
hist(as.numeric(test$RET))
names(CRSP_codes10_11)
CRSP_codes10_11_colnames <- names(CRSP_codes10_11)
CRSP_codes10_11_colnames
CRSP_codes10_11_colnames[1]
CRSP_codes10_11_colnames <- names(CRSP_codes10_11)
colsToKeep <- c("date", "TICKER", "BIDLO", "ASKHI", "PRC", "VOL", "RET", "BID", "ASK", "OPENPRC", "NUMTRD", "RETX")
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, nrows=1000, select=colsToKeep, sep = ',')
View(CRSP_codes10_11)
setwd("C:\\Users\\Caio Laptop\\OneDrive - The University of Kansas\\Documents\\PhD\\13. WPs\\08. Ambiguity, Big Data & Now-Casting\\02.Codes\\")
library(data.table)
library(tidyr)
CRSP_codes10_11_colnames <- names(CRSP_codes10_11)
colsToKeep <- c("date", "TICKER", "BIDLO", "ASKHI", "PRC", "VOL", "RET", "BID", "ASK", "OPENPRC", "NUMTRD", "RETX")
CRSP_codes10_11 <- fread('01.DBs/WRDS/a6f832e5c173ebba.csv', header = T, nrows=1000, select=colsToKeep, sep = ',')
